#### 简要描述

- 指定fileid、aeskey、文件类型，下载CDN。

#### 请求URL

- ` http://127.0.0.1:8888/api/`

#### 请求方式

- POST

#### 参数

| 参数名           | 必选 | 类型     | 说明                                                                                 |   
|:--------------|:---|:-------|------------------------------------------------------------------------------------|   
| type          | 是  | int    | 接口编号                                                                               |   
| fileid        | 是  | string | fileid                                                                             |   
| aeskey        | 是  | string | aeskey                                                                             |   
| fileType      | 是  | int    | 文件类型，可参考枚举值，更多类型可从消息XML获取                                                          |   
| savePath      | 是  | string | 文件保存路径                                                                             |   
| bAsync        | 否  | bool   | 如果将该参数设置为true，则任务不再阻塞，接口响应内容会通过消息处理器返回，消息推送类型为0<br/>如果提供了asyncUserData参数，会随调用结果一起推送 |   
| asyncUserData | 否  | str    | xxxx                                                                               |   
| chatType      | 否  | int    | 消息类型，默认为0  <br/>0:私聊消息 1:群聊消息                                                           |   

#### 文件类型

| 文件类型        | 枚举值 | 备注                                  |  
|:------------|:----|:------------------------------------|   
| 原图          | 1   | 用于bigimgurl，公众号中的图片，可以尝试使用此类型下载     |
| 高清图         | 2   | 用于midimgurl，聊天图片一般使用此类型             |
| 缩略图         | 3   | 用于thumbimgurl，小程序消息中的图片，可以尝试使用此类型下载 |
| 视频          | 4   | 视频消息                                |
| 文件          | 5   | 文件消息                                |
| 大文件(25M及以上) | 7   | 文件消息                                |
| 语音          | 15  | 语音消息                                |

#### 备注
- 此接口支持企业微信联系人发送的消息，使用的参数需要从url中提取，f表示fileid，p表示fileType。
- 企业联系人发送的cdn消息，可以使用GET方式请求url（注意要将&amp;替换为&），然后使用aes-ecb解密，并使用PKCS7进行unpadding。
- （不能保证企业微信发的消息测试用例覆盖完整，如方案无法正常执行请提供原始的xml/入群链接等方式帮助技术排查研究）

#### 请求示例

```
   {
  "type": 88,
  "fileid": "5bd0269b7y04000102f000141004020e8ab38a1ba51da...",
  "aeskey": "e742f8ce990980e402b...",
  "fileType": 5,
  "savePath": "C:\xxx.txt"
 } 
```

#### 返回示例

``` 
  {
    "data": {
      "status": 0,
      "desc": "",
    }
  }
```

#### 返回参数说明

| 参数名         | 类型     | 说明   |   
|:------------|:-------|------|   
| error_code  | int    | 错误代码 |   
| description | string | 错误描述 |   
| data        | json   | 业务数据 |   

#### 备注

- 更多返回错误代码请看[错误代码.md](../错误代码.md)





